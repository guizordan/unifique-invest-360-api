{"version":3,"sources":["../../src/settings.ts"],"sourcesContent":["import { Dialect } from \"sequelize\";\nimport { ensureEnv } from \"./shared/helpers\";\n\nimport dotenv from \"dotenv\";\ndotenv.config();\n\nexport const NODE_ENV =\n  (process.env.NODE_ENV as \"local\" | \"test\" | \"prod\") || \"prod\";\nconst secure = NODE_ENV === \"local\" ? false : true;\n\nexport const WEB_URL = process.env.WEB_URL || \"https://test.unifique.com.br/\";\n\nexport const LOG_LEVEL =\n  (process.env.LOG_LEVEL as \"info\" | \"warn\" | \"error\" | \"debug\") || \"info\";\n\nexport const PORT = parseInt(process.env.PORT || \"3000\", 10);\nexport const MAILER_KEY = process.env.MAILER_KEY || \"\";\n\nexport const SESSION_SECRET = ensureEnv(\"SESSION_SECRET\");\n\nexport const ADMIN_SENDER =\n  NODE_ENV === \"prod\" ? \"admin@unifique.com.br\" : \"admin@test.unifique.com.br\";\n\nconst sameSite = {\n  prod: \"Strict\",\n  test: \"None\",\n  local: \"Lax\",\n}[NODE_ENV] as \"lax\" | \"none\" | \"strict\" | undefined;\n\nexport const cookieSettings: {\n  path: string;\n  httpOnly: boolean;\n  maxAge: number;\n  sameSite?: \"lax\" | \"none\" | \"strict\";\n  secure: boolean;\n} = {\n  path: \"/\",\n  httpOnly: true,\n  maxAge: 7200000,\n  sameSite,\n  secure,\n};\n\ninterface SequelizeConfig {\n  database: string;\n  host: string;\n  port: number;\n  clientId: string;\n  clientSecret: string;\n  authority: string;\n  dialect: Dialect;\n  logging: boolean | ((sql: string) => void);\n}\n\nexport const azureDBConfig: SequelizeConfig = {\n  database: ensureEnv(\"AZURE_SQL_DATABASE\"),\n  host: ensureEnv(\"AZURE_SQL_SERVER\"),\n  port: Number(process.env.AZURE_SQL_PORT) || 1433,\n  clientId: ensureEnv(\"AZURE_AD_CLIENT_ID\"),\n  clientSecret: ensureEnv(\"AZURE_AD_CLIENT_SECRET\"),\n  authority: `https://login.microsoftonline.com/${ensureEnv(\"AZURE_AD_TENANT_ID\")}`,\n  dialect: \"mssql\",\n  logging: false,\n};\n"],"names":["ensureEnv","dotenv","config","NODE_ENV","process","env","secure","WEB_URL","LOG_LEVEL","PORT","parseInt","MAILER_KEY","SESSION_SECRET","ADMIN_SENDER","sameSite","prod","test","local","cookieSettings","path","httpOnly","maxAge","azureDBConfig","database","host","port","Number","AZURE_SQL_PORT","clientId","clientSecret","authority","dialect","logging"],"mappings":"AACA,SAASA,SAAS,QAAQ,mBAAmB;AAE7C,OAAOC,YAAY,SAAS;AAC5BA,OAAOC,MAAM;AAEb,OAAO,MAAMC,WACX,AAACC,QAAQC,GAAG,CAACF,QAAQ,IAAkC,OAAO;AAChE,MAAMG,SAASH,aAAa,UAAU,QAAQ;AAE9C,OAAO,MAAMI,UAAUH,QAAQC,GAAG,CAACE,OAAO,IAAI,gCAAgC;AAE9E,OAAO,MAAMC,YACX,AAACJ,QAAQC,GAAG,CAACG,SAAS,IAA4C,OAAO;AAE3E,OAAO,MAAMC,OAAOC,SAASN,QAAQC,GAAG,CAACI,IAAI,IAAI,QAAQ,IAAI;AAC7D,OAAO,MAAME,aAAaP,QAAQC,GAAG,CAACM,UAAU,IAAI,GAAG;AAEvD,OAAO,MAAMC,iBAAiBZ,UAAU,kBAAkB;AAE1D,OAAO,MAAMa,eACXV,aAAa,SAAS,0BAA0B,6BAA6B;AAE/E,MAAMW,WAAW;IACfC,MAAM;IACNC,MAAM;IACNC,OAAO;AACT,CAAC,CAACd,SAAS;AAEX,OAAO,MAAMe,iBAMT;IACFC,MAAM;IACNC,UAAU;IACVC,QAAQ;IACRP;IACAR;AACF,EAAE;AAaF,OAAO,MAAMgB,gBAAiC;IAC5CC,UAAUvB,UAAU;IACpBwB,MAAMxB,UAAU;IAChByB,MAAMC,OAAOtB,QAAQC,GAAG,CAACsB,cAAc,KAAK;IAC5CC,UAAU5B,UAAU;IACpB6B,cAAc7B,UAAU;IACxB8B,WAAW,CAAC,kCAAkC,EAAE9B,UAAU,uBAAuB;IACjF+B,SAAS;IACTC,SAAS;AACX,EAAE"}