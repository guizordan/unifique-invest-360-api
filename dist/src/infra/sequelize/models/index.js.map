{"version":3,"sources":["../../../../../src/infra/sequelize/models/index.js"],"sourcesContent":["'use strict';\n\nconst fs = require('fs');\nconst path = require('path');\nconst Sequelize = require('sequelize');\nconst process = require('process');\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst config = require(__dirname + '/../index.ts')[env];\nconst db = {};\n\nlet sequelize;\nif (config.use_env_variable) {\n  sequelize = new Sequelize(process.env[config.use_env_variable], config);\n} else {\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\n\nfs\n  .readdirSync(__dirname)\n  .filter(file => {\n    return (\n      file.indexOf('.') !== 0 &&\n      file !== basename &&\n      file.slice(-3) === '.js' &&\n      file.indexOf('.test.js') === -1\n    );\n  })\n  .forEach(file => {\n    const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach(modelName => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nmodule.exports = db;\n"],"names":["fs","require","path","Sequelize","process","basename","__filename","env","NODE_ENV","config","__dirname","db","sequelize","use_env_variable","database","username","password","readdirSync","filter","file","indexOf","slice","forEach","model","join","DataTypes","name","Object","keys","modelName","associate","module","exports"],"mappings":"AAAA;AAEA,MAAMA,KAAKC,QAAQ;AACnB,MAAMC,OAAOD,QAAQ;AACrB,MAAME,YAAYF,QAAQ;AAC1B,MAAMG,UAAUH,QAAQ;AACxB,MAAMI,WAAWH,KAAKG,QAAQ,CAACC;AAC/B,MAAMC,MAAMH,QAAQG,GAAG,CAACC,QAAQ,IAAI;AACpC,MAAMC,SAASR,QAAQS,YAAY,eAAe,CAACH,IAAI;AACvD,MAAMI,KAAK,CAAC;AAEZ,IAAIC;AACJ,IAAIH,OAAOI,gBAAgB,EAAE;IAC3BD,YAAY,IAAIT,UAAUC,QAAQG,GAAG,CAACE,OAAOI,gBAAgB,CAAC,EAAEJ;AAClE,OAAO;IACLG,YAAY,IAAIT,UAAUM,OAAOK,QAAQ,EAAEL,OAAOM,QAAQ,EAAEN,OAAOO,QAAQ,EAAEP;AAC/E;AAEAT,GACGiB,WAAW,CAACP,WACZQ,MAAM,CAACC,CAAAA;IACN,OACEA,KAAKC,OAAO,CAAC,SAAS,KACtBD,SAASd,YACTc,KAAKE,KAAK,CAAC,CAAC,OAAO,SACnBF,KAAKC,OAAO,CAAC,gBAAgB,CAAC;AAElC,GACCE,OAAO,CAACH,CAAAA;IACP,MAAMI,QAAQtB,QAAQC,KAAKsB,IAAI,CAACd,WAAWS,OAAOP,WAAWT,UAAUsB,SAAS;IAChFd,EAAE,CAACY,MAAMG,IAAI,CAAC,GAAGH;AACnB;AAEFI,OAAOC,IAAI,CAACjB,IAAIW,OAAO,CAACO,CAAAA;IACtB,IAAIlB,EAAE,CAACkB,UAAU,CAACC,SAAS,EAAE;QAC3BnB,EAAE,CAACkB,UAAU,CAACC,SAAS,CAACnB;IAC1B;AACF;AAEAA,GAAGC,SAAS,GAAGA;AACfD,GAAGR,SAAS,GAAGA;AAEf4B,OAAOC,OAAO,GAAGrB"}